<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>JTCGen - Lib</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
	  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>

    <!-- Bootstrap Material Design -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap-material-design.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/ripples.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
    <link rel="stylesheet" type="text/css" href="assets/css/snackbar.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/base.css">
  </head>
  <body>  
  <div id="menu" class="navbar navbar-default fade">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="javascript:scrollToElement($('#home'))"><i>JTCGen</i><div class="ripple-container"></div></a>
      </div>
      <div class="navbar-collapse collapse navbar-responsive-collapse">
        <ul class="nav navbar-nav">
          <li><a href="javascript:scrollToElement($('#about'))">Sobre o projeto<div class="ripple-container"></div></a></li>
          <li><a href="javascript:scrollToElement($('#presents'))">Começar<div class="ripple-container"></div></a></li>
          <li><a href="javascript:scrollToElement($('#documentation'))">Documentação</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a data-toggle=snackbar data-content="Por favor, clique no Link: <strong>Pesquisa para validação de estudo empregado na Lib. JTCGen</strong>" href="javascript:scrollToElement($('#link-pesquisa'))"">Por favor, poderia responder esta pesquisa?<div class="ripple-container"></div></a></li>
        </ul>
      </div>
    </div>
  </div>
    <section id="home">
      <div class="container">
        <div class="presentation">
          <div class="col-sm-12">
            <h1 class="project-name">Aproxime o momento de teste com o desenvolvimento!</h1>
            <h2 class="project-tagline">Conheça, explore e contribua com a lib. JTCGen.</h2>
          </div>
		  <div id="get-started" class="col-sm-12">
            <a href="javascript:scrollToElement($('#about'))" class="btn btn-warning btn-lg btn-raised">Começar Agora</a>
          </div>
          <div id="view-git" class="col-sm-12">
            <a href="https://github.com/rgoncalves94/jtcgen" class="btn btn-info btn-lg btn-raised">Contribua no Github</a>
          </div>
          <div id="view-git" class="col-sm-12">
            <a target="_blank" href="http://rgoncalves94.github.io/jtcgen/jars/jtcgen-v1.0.3.jar" class="btn btn-success btn-lg btn-raised">Download</a>
          </div>
        </div>
      </div>
    </section>
  <section id="about">
      <div class="container">
        <div class="col-sm-12">
          <h2>1. Sobre o projeto</h2>
        </div>
        <div class="col-sm-12">
          <p class="alert alert-danger">
            Antes de responder a pesquisa, por gentileza leia sobre a Biblioteca para entender o caminho que ela visa validar e sua motivação.
          </p>
          <p>
            A motivação para desenvolver este projeto se deu à partir de um TCC, que ainda está em andamento. A validação desta biblioteca com a comunidade será um ponto chave para a conclusão deste trabalho, <span class="text-info"> e contamos com seu auxílio para responder um formulário de pesquisa, que você poderá encontrar ao final do tópico ou clicando no botão à direita do menu do site.</span>
          </p>
          <p class="alert alert-info">
            Para detalhes técnicos de implementação, veja: <a href="javascript:scrollToElement($('#documentation'))"><strong>Documentação</strong></a>.
          </p>
          <p>
            Testar software é muito importante, mas é uma tarefa de grande custo que se deve estudar bem as funcionalidades que deverão ter uma maior carga de testes e/ou testes mais elaborados. Esta biblioteca nasceu para validar o que acreditamos ser o "meio do caminho", que esta entre outros dois caminhos que já conhecemos: Testar seu código após a codificação ou utilizando, uma técnica cada vez mais popular chamada, <i>Test-Driven Development</i>, onde o desenvolvimento acaba sendo guiado pelo desenvolvimento de testes automatizados.
          </p>
          <p id="link-pesquisa">
            As duas abordagens citadas acabam sendo o oposto uma da outra mas visam alcançar o mesmo objetivo. Dependendo do desenvolvedor, de sua experiência e habilidade, escolhem usar as duas abordagem,  ou explorar uma mais que a outra, ou nem testam seu código por não estão familiarizados com a escrita de testes automatizados ou outros motivos, depende muito (por isso o formulário de pesquisa, para se trabalharmos com dados do mundo real). A ideia da biblioteca é tentar aproximar essas duas visões de teste, onde traga o <span class="text-success">momento de desenvolver os testes automatizados para bem próximo do desenvolvimento de software propriamente dito</span>. Unindo estas duas etapas, tenta-se criar um mecanismo onde os objetivos são facilitar a forma de se testar código e tentar aumentar a produtividade na criação de casos de teste automatizados.
          </p>
          <p>Por isso, pedimos a sua ajuda e a da comunidade para que avaliem a ideia do projeto, respondendo o questionário e, se houver interesse, contribuir no desenvolvimento deste artefato:</p>
          <p class="alert alert-info">
            Link: <a target="_blank" href="https://goo.gl/forms/kl8PZK2biwExq4A83">Questionário para validação de estudo empregado na Lib. JTCGen</a>
          </p>
        </div>
      </div>
  </section>
	<section id="presents">
      <div class="container">
			<div class="col-sm-12">
				<h2>2. Primeiros Passos (Overview)</h2>
        <p class="alert alert-warning">
          Atualmente a biblioteca está em fase de desenvolvimento, mas já está sendo disponibilizada para utilização. Necessitamos do auxílio da comunidade para validar a ideia e também evoluí-la, se houver interesse. Leia: <a href="javascript:scrollToElement($('#about'))"><strong>Sobre o Projeto</strong></a>
        </p>
        <p class="alert alert-info">
          Para facilitar o teste da biblioteca, <strong><a href="https://github.com/rgoncalves94/jtcgen-example">clicando aqui</a></strong> você pode
          encontrar um pequeno projeto com algumas classes para explorar a biblioteca.
        </p>
        <p>
          <span class="label label-info">INFO</span> Ao executar a biblioteca, caso exista um teste com o mesmo nome de arquivo que será gerado,
          será perguntado se deseja sobrescreve-lo. Por segurança, todo caso de testes sobrescrito é criada uma cópia de backup.
        </p>
			</div>
      <div class="col-sm-12">
          <h3>2.1 Pré-requisitos e Dependências</h3>
      </div>
      <div class="col-sm-12">
        <p>
          Este projeto foi desenvolvido utilizando recursos da <span class="label label-warning">JDK Versão 8</span>.
        </p>
        <p>
          A biblioteca não funciona nas versões anteriores do Java.
        </p>
        <p>
          Este projeto cria casos de teste no padrão do JUnit, e escrita de <i>Mock Objects</i> no padrão do Mockito.
        </p>
        <p class="col-sm-12 text-danger">
          JUnit: <a href="http://junit.org/junit4/">http://junit.org/junit4/</a>
        </p>
        <p class="col-sm-12 text-danger">
          Mockito: <a href="http://site.mockito.org/">http://site.mockito.org/</a>
        </p>
      </div>
      <div class="col-sm-12">
          <h3>2.2 Instalação</h3>
      </div>
			<div class="col-sm-12">
				<p>
					Esta biblioteca foi desenvolvida na linguagem <strong class="text-danger">Java</strong> para ser utilizada nos casos de testes desenvolvidos também em projetos <strong class="text-danger">Java</strong>.
				</p>
        <p>Faça o download do <code>.jar</code>, integre-o em seu build path.</p>
        <p>
          Após esta configuração inicial, será necessária a implementação de uma classe de manifesto. Conforme o exemplo:
        </p>
        <pre>
          <code class="java">
            public class Manifest {
              public static void main(String[] args) {
                JTCGenenerator jtcGenenerator = new JTCGenenerator();

                jtcGenenerator.generateTests();
              }
            }
          </code>
        </pre>
        </div>
        <div class="col-sm-12">
          <h3>2.3 Utilização Básica</h3>
        </div>
        <div class="col-sm-12">
          <p>
            Na sua classe de produção, marque a classe com a <i>Annotation</i> <code>@JTCGen</code> e acima do método que deseja criar o teste automatizado, informe através de uma expressão baseada na documentação desta lib. o caso de teste informando os dados necessários:
          </p>
          <pre>
            <code class="java">
              ...

              @JTCGen
              class ContaCorrente extends Conta {
                
                  ...

                  @Test("setup([10, 12, 100.0]).parameter([{c: 'ContaPoupanca@getSaldo()', v: 200.0}]).eq(300.0)")
                  public double somaValoresDasContas(ContaPoupanca cp) {
                    return this.saldo + cp.getSaldo();
                  }
              }
            </code>
          </pre>
          <p>
            Execute a classe de <code>Manifesto</code> e obtenha como saída a classe de Teste automatizado implementada:
          </p>
          <pre>
            <code class="java">
              public class ContaAplicacaoTest {

                ...
                
                @Test
                public void somaValoresDasContas() {
                  ContaCorrente contacorrente = new ContaCorrente(10, 12, 100.0);

                  ContaPoupanca contapoupanca = mock(ContaPoupanca.class);
                  when(contapoupanca.getSaldo()).thenReturn(200.0);

                  double expected = contacorrente.somaValoresDasContas(contapoupanca);
                  assertEquals(300.0, expected, 0.0001);
                }
              }
            </code>
          </pre>
          <p class="alert alert-warning">
            Está biblioteca tem como dependência os frameworks <strong>JUnit</strong> e <strong>Mockito</strong>.
          </p>
        </div>
    </section>
	<section id="documentation">
      <div class="container">
			<div class="col-sm-12">
				<h2>3. Documentação</h2>
			</div>
      <div class="col-sm-12">
          <p>
            Você pode encontrar um projeto de exemplo neste link: <a href="https://github.com/rgoncalves94/jtcgen-example">https://github.com/rgoncalves94/jtcgen-example</a>
          </p>
          <p>
            A utilização dos recursos oferecidos pela biblioteca foram desenvolvidos pensando nos cenários dos casos de teste.
          </p>
          <p>
            Ao criar um teste automatizado precisamos pensar em um <span class="label label-warning">cenário</span>, inicializar os objetos e variaveis necessários para que a <span class="label label-warning">ação</span> à ser testada seja executada de maneira devida, para, que por fim, possamos <span class="label label-warning">comparar</span> o resultado desta com o o valor de saída correspondente àquele cenário.
          </p>
          <p>
            Esta biblioteca implementa algumas <i>annotations</i> para serem declaradas dentro da sua "classe de produção", onde sera informada como texto dentro delas os parametros para gerar o caso de teste invocando o método que deseja testar.
          </p>
          <p>Podemos ver isso com mais clareza nos próximos exemplos:</p>
      </div>
      <div class="col-sm-12">
        <h3>3.1. Utilização</h3>
      </div>
      <div class="col-sm-12">
          <p>
            Para casos de testes simples, a biblioteca fornece algumas <i>annotations</i> com uma sintaxe mais textual, pois trabalha apenas com variaveis escalares (tipo primitivos). Vejamos alguns exemplos à seguir:
          </p>
      </div>
      <div class="col-sm-12">
          <pre>
            <code class="java">
              @JTCGen
              public class Descontos {
                
                ... // Atributos
                
                @SetUp({"100.0", "100.0", "100.0","100.0"})
                public Descontos(double vt, double am, double ad, double adiant) {
                  this.valeTransporte = vt;
                  this.assistMedica = am;
                  this.assistDental = ad;
                  this.adiantamento = adiant;
                }

                ... //Getters and Setters
                
                @TestEquals({"", "400.0"})
                public double obtemDescontosSomados() {
                  return this.adiantamento + this.assistDental + this.assistMedica + this.valeTransporte;
                }
                
              }
            </code>
          </pre>
          <p>Ao executar a biblioteca, temos como resultado o caso de teste:</p>
          <pre>
            <code class="java">
              public class DescontosTest {

                private Descontos instance;

                @Before
                public void setUp() throws Exception {
                  this.instance = new Descontos(100.0,100.0,100.0,100.0);
                }

                @After
                public void tearDown() throws Exception {
                  this.instance = null;
                }

                @Test
                public void obtemDescontosSomados() {
                  double resultado = this.instance.obtemDescontosSomados();
                  assertEquals(400.0, resultado, 0.00001);
                }
                
              }
            </code>
          </pre>
          <p>
            Abaixo, temos algumas caracteristicas dos recursos e do funcionamento da biblioteca:
          </p>
      </div>
      <div class="col-sm-12">
        <h3>3.1.1 <i>Annotation</i> de permissão</h3>
      </div>
      <div class="col-sm-12">
        <p>
          <span class="label label-warning">Importante</span> 
          Para que a biblioteca identifique que você deseja gerar um caso de teste para a mesma, você
          precisa anota-la com <code>@JTCGen</code>.
        </p>
        <p>
          <pre>
            <code class="java">
                  @JTCGen
                  public class Descontos { 
                    ...
                  }
            </code>
          </pre>
        </p>
        <p>
          A função dela é simplesmente deixar a classe visível à biblioteca. Caso não queira que mais que a
          biblioteca gere casos de testes para ela, apenas remova ou comente a <i>annotation</i>.
        </p>
      </div>    
  
      <div class="col-sm-12">
        <h3>3.1.2 Declarando dados de inicialização do Método Construtor</h3>
      </div>
      <div class="col-sm-12">
        <p>
          A bibliteca gera casos de teste no padrão que o JUnit implementa. 
          Com a <i>annotation</i> SetUp é criado o método SetUp do JUnit, onde realiza os passos
          iniciais do teste automatizado.
        </p>
        <p>
          Ao anotar esta marcação no seu método construtor é necessário informar respectivamente os valores
          que serão utilizados como parâmetros quando for instanciada a classe no caso de teste. 
        </p>
        <p>
          O exemplo abaixo inicializa a classe adicionando double 100.0 para cada argumento presente
          na assinatura do método, respectivamente.
        </p>
        <p>
          <pre>
            <code class="java">
                  ...
                  @SetUp({"100.0", "100.0", "100.0","100.0"})
                  public Descontos(double vt, double am, double ad, double adiant) {
                    this.valeTransporte = vt;
                    this.assistMedica = am;
                    this.assistDental = ad;
                    this.adiantamento = adiant;
                  }
                  ...
            </code>
          </pre>
        </p>
        <p>
          Se torna uso obrigatório caso a sua classe possua um método construtor com valores iniciais.
        </p>
      </div>
      
      <div class="col-sm-12">
        <h3>3.1.3 Declarando Casos de Testes</h3>
      </div>
      <div class="col-sm-12">
        <p>
          Para gerar casos de testes, existem algumas <i>annotations</i> capazes de executar 
          apenas um dos métodos assert do JUnit. Abaixo o exemplo:
        </p>
        <p>
          <pre>
            <code class="java">
                  ...
                  @TestEquals({"", "400.0"})
                  public double obtemDescontosSomados() {
                    return this.adiantamento + this.assistDental + this.assistMedica + this.valeTransporte;
                  }
            </code>
          </pre>
        </p>
        <p>
          A <i>annotation</i> @TestEquals implementa o método "assertEquals" do Junit
          ela requer dois parâmeros:
          <ul>
            <li>1º - Valores que serão assumidos nos argumentos, separados por ponto e virgula;</li>
            <li>2º - Valor esperado como retorno quando invocado o método com os valores passados via parâmetro</li>
          </ul>
          <p class="alert alert-info">
            Observação: Caso tenha utilizado a <i>annotation</i> @SetUp no método construtor, tenha em mente que os dados inicializados podem alterar o resultado final da execução. Pois então, os considere nos resultados esperados.
          </p>
          <p>Outros exemplos:</p>
          <pre>
            <code class="java">
                  ...
                  @TestEquals({"150.05", "400.0"})
                  public double obtemDescontosSomados(double outrosDescontos) {
                    return this.adiantamento + this.assistDental + this.assistMedica + this.valeTransporte;
                  }

                  ...
                  /**
                   * Passe os vários parametros separados por ponto e virgula
                   */
                  @TestEquals({"150.05;0.5", "400.0"})
                  public double obtemDescontos(double outrosDescontos, double percAuxEmpresa) {
                    return (
                      this.adiantamento + this.assistDental + this.assistMedica + this.valeTransporte
                    ) * percAuxEmpresa;
                  }

                  ...
                  /**
                   * Esta annotation apenas necessita da declaração dos parâmetros, pois o retorno esperado é true.
                   */
                  @TestTrue({"500.5"})
                  public boolean descontosPositivos(double outrosDescontos) {
                    return (
                      this.adiantamento + this.assistDental + this.assistMedica + this.valeTransporte
                    ) >= 0;
                  }
            </code>
          </pre>
        </p>
      </div>


      <div class="col-sm-12">
        <h2>3.1.4 Criando Casos de Testes mais complexos (utilizando tipos abstratos e <i>mock object</i>)</h2>
      </div>
      <div class="col-sm-12">
        <p>
          Para que fosse possível gerar casos de testes automatizados que implementasse tipos abstratos de dados
          e também a possibilidade de criar objetos dubles (<i>mock objects</i>) foi criada uma unica <i>annotation</i>
          onde seria responsável por interpretar scripts de execução.
        </p>
        <p>
          Neste caso foi utilizado uma API chamada <a href="http://www.oracle.com/technetwork/articles/java/jf14-nashorn-2126515.html">Nashorn</a>.
          Ela é um motor da linguagem JavaScript integrado a versão Java 8. Ela é utilizada dentro deste projeto
          para facilitar a escrita dos casos de teste, deixando menos complexa a declaração de tipos abstratos.
        </p>
        <p>
          Abaixo, temos um exemplo completo para que possamos entender melhor:
        </p>
        <pre>
          <code class="java">
            @JTCGen
            public class Funcionario {
              
              ... // Atributos
              
              public Funcionario(String nome, double salarioBase, TipoContratacao tipoContrato) {
                this.nome = nome;
                this.salarioBase = salarioBase;
                this.tipoContrato = tipoContrato;
              }
              
              /**
               * Calcula descontos do vale transporte
               * */
              @Test("setup(['User', 5000.0, {c:'TipoContratacao@getSigla()@getNome()', v:['CLT', 'Contrato']}]).parameter().eq(250.0)")
              public double calculaDescontoVT() {
                
                double percentualDesconto = 0.0;
                
                if(this.salarioBase > 2000.0 && this.tipoContrato.getSigla().equals("CLT") 
                    && this.tipoContrato.getNome().equals("Contrato")){
                  percentualDesconto = 0.05;
                }
                
                return this.salarioBase * percentualDesconto;
              }
              
              ...
            }

          </code>
        </pre>
        <p>
          Nesta abordagem, é necessário declarar a execução de alguns scripts que a biblioteca fornece desenvolvidos
          em JavaScript, para que seja gerado posteriormente o caso de teste desta maneira:
        </p>
        <pre>
          <code class="java">
            @Test
            public void calculaDescontoVT() {
              TipoContratacao tipocontratacao = mock(TipoContratacao.class);
              when(tipocontratacao.getSigla()).thenReturn("CLT");

              when(tipocontratacao.getNome()).thenReturn("Contrato");

              Funcionario funcionario = new Funcionario("User", 5000.0, tipocontratacao);

              double expected = funcionario.calculaDescontoVT();
              assertEquals(250.0, expected, 0.0001);
            }
          </code>
        </pre>
        <p>
          
        </p>
      </div>
      <div class="col-sm-12">
        <h3>3.1.4.1. Funções disponibilizadas</h3>
      </div>
      <div class="col-sm-12">
        <h3><strong>Método: setup()</strong></h3>
        <p>
          Este método é responsável por gerar a inicialização da classe do método que será testado.
        </p>
        <p>
          Ele possui o mesmo fim da <i>annotation</i> @SetUp, mas ele possui a capacidade de processar 
          a criação de tipos abstratos de dados, criando o <i>mock</i> de seu objeto e métodos.
        </p>
        <p>
          Sua declaração deve ser correspondente ao método construtor que deseja utilizar: 
        </p>
        <p class="alert alert-danger">
          setup([200.2, "Teste", {c:"TipoAbstrato@metodoASerExecutado()", v:["valor retornado"]}])
        </p>
        <p>
          para que possa processar tipos abstratos é necessário passar um objeto JSON no padrão:
        </p>
        <pre>
          <code class="javascript">
            {
              c: "Classe@executa()", // call
              v: "valorASerRetornado" // value            
            }
          </code>
        </pre>
        <p>
          A biblioteca compreenderá que você necessita de uma nova instancia de "Classe", 
          e o método "executa" deve ser <i>'mockado'</i> retornando o valor string "valorASerRetornado".
        </p>
      </div>
      <div class="col-sm-12">
        <h3><strong>Método: parameter()</strong></h3>
        <p>
          Este método é responsável por gerar a inicialização das classes que o método à ser testado possui dependencia para sua execução. E após isso testar o método.
        </p>
        <p>
          A declaração dos parametros dele é identica ao método <strong>setup()</strong> explicado logo acima.
        </p>
        <p class="alert alert-danger">
          parameter([{c:"UmaClasse@method()@otherMethod()", v:[5000, 920.02]}, "testeParametro"])
        </p>
        <p>
          Para realizar o <i>mock</i> de mais de um comportamento da classe declare os métodos em sequencia separados por @:
        </p>
        <p>
          <code>UmaClasse@method()@otherMethod()</code>. 
        </p>
        <p>
          E passe um vetor contendo os valores que serão executados, respectivamente.
        </p>
        <p>
          [5000, 920.02]
        </p>
      </div>
      <div class="col-sm-12">
        <h3><strong>Métodos de comparação: asserts</strong></h3>
        <p>
          Para realizar a comparação com o retorno esperado do método são disponibilizadas os seguintes métodos:
        </p>
        <p>
          <ul>
            <li>eq('ValorDeComparação') - representa o assertEquals do JUnit</li>
            <li>eqVoid('ValorDeComparação') - representa o assertEquals do JUnit com a capacidade de testar metodos void</li>
            <li>isFalse() - representa o assertFalse(), não precisa de parametros de comparação.</li>
            <li>isTrue() - representa o assertTrue(), não precisa de parametros de comparação.</li>
            <li>isNull() - representa o assertNull(), não precisa de parametros de comparação.</li>
            <li>isNotNull() - representa o assertNotNull(), não precisa de parametros de comparação.</li>
          </ul>
        </p>
      </div>
    </div>
  </section>
	<section id="footer">
		<div class="container">
			<div class="col-sm-12 text-center">
				<h5>Biblioteca JTCGen, 2016</h5>
			</div>
		</div>
	</section>
  <script   src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="assets/js/ripples.min.js" type="text/javascript"></script>
  <script src="assets/js/material.min.js" type="text/javascript"></script>
  <script src="assets/js/snackbar.min.js" type="text/javascript"></script>
  <script src="assets/js/page.js" type="text/javascript"></script>
  </body>
</html>